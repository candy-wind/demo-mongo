查看服务器版本
uname -r
查看配置信息
cat /etc/os-release





镜像：image 好比一个模版通过模版创建容器服务 可以创建多个容器 最后项目在容器运行
容器：container 通过镜像来创建 可以理解为一个简易的linux系统
仓库：repository 仓库存放镜像地方 私有和公有

安装docker
"CentOS Linux 7 (Core)
https://docs.docker.com/engine/install/centos/
1,写在旧的版本
sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
2，需要安装的包
sudo yum install -y yum-utils
3，设置镜像的仓库
sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo  //国外的不推荐使用 贼慢
http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo //阿里云的

4 安装docker内容相关

sudo yum install docker-ce docker-ce-cli containerd.io

5 启动docker
sudo systemctl start docker

6 安装helloworld
$ sudo docker run hello-world


7 查看images镜像
docker amages

卸载docker
$ sudo yum remove docker-ce docker-ce-cli containerd.io
$ sudo rm -rf /var/lib/docker  //资源文件


docker 默认的资源路径
/var/lib/docker


阿里云镜像加速；


底层原理：
 1   docker是如何工作的
    docker是一个client-servie结构的系统，docker的守护进程运行在主机上，通过socket从客户端访问
    dockerService接收到docker-client的指令，执行这个命令

 2 docker比vm快
    docker有着比虚拟机更少的抽象层
    docker新建一个容器的时候不需要像虚拟机一样重新加载一个操作系统内核


docker镜像的命令：
    docker pull 下载 分层下载 重复的部分不会下载
    删除镜像命令docker rmi -f $(docker images -aq)

容器命令：
docker run -it 交互式运行进入容器查看内容
            -p 指定端口
docker ps 列出正在运行的容器
           -a列出历史运行的


docker日志
docker logs -f -t tail 10 imageid 限时行数日志
docker logs -ft image 显示所有的

自己编写一个脚本 输入日志
docker run -d mysql  /bin/sh -c "while true;do echo zht;sleep 1;done"

docker进程
docker top

查看镜像元数据
docker inspect imagesId

进入当前正在运行中的容器

docker exec -it 容器id /bin/bash  // 进入一个容器后开启一个新的终端，可以在里面操作
docker attch   进入一个正在运行的容器 不会启动新的终端


从容器内拷贝到主机上
docker cp  容器id:目录/文件名字 主机目录

安装nginx
docker pull nginx
docker run -d --name nginx01 -p 3344:80 nginx

安装tomcat
发现问题 linux命令少了
没有webapps下面没有文件 需要拷贝 阿里云镜像的问题 默认是最小的镜像，所有不必要的全部剔除掉 保证最小的运行环境

安装elasticsearch
爆露的端口很多 十分好耗内存
数据需要放在安全目录 挂载
--net somenetwork 网络配置
-e 环境参数的修改
$ docker run -d --name elasticsearch  -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms64m -Xmx521m" elasticsearch:7.6.2




docker stats 查看cpu状态

管理镜像的工具
portainer docker图形化管理工具 提供一个后台面板供我们做操


docker镜像加载原理
ufs 联合文件系统
bootfs 底层内核
rootfs

docker分层理解

docker镜像都是只读的 当容器启东时 一个新的可写层呗加载到镜像顶部
这一层我们通常说的容器，容器一下就叫镜像

我们的操作都在容器层


commit镜像
docker commit 提交容器成为一个新的容器



